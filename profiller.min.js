var ProFiller=(function(){var a=Class.create();a.Version="2.2.4";a.options={reset:true};a.prototype={initialize:function(c,b){this.options={};Object.extend(this.options,a.options);Object.extend(this.options,b||{});this.form=$(c);this.elements=this.form.getElements()},fill:function(e){var d,b,c;if(this.options.reset){this.form.reset()}this.elements.each(function(g){b=g.readAttribute("name");d=this._getValue(b,e);c=g.readAttribute("type");if(Object.isArray(d)){for(var f=0;f<d.length;f++){this._setValue(g,c,d[f])}}else{this._setValue(g,c,d)}}.bind(this));this.form.watch();return this.form},_getValue:function(b,f){var d=$H(f);var e=Object.isArray(b)?b:b.match(/([\w-:\.]+)/g);var c=d.get(e[0]);if(e.length>1){e.shift();return this._getValue(e,c)}return c},_setValue:function(d,c,e){var b=d.readAttribute("value");switch(c){case"radio":(b==e)?d.setValue(e):false;break;case"checkbox":(b==e)?d.setValue(e):false;break;default:if(e){d.setValue(e)}break}}};Element.addMethods("FORM",{fill:function(c,e,d){var b=Object.isUndefined(d)?true:d;return new a(c,{reset:b}).fill(e)},watch:function(b){var b=$(b);b.store("profiller",{form:b.serialize()});return b},changed:function(b){var b=$(b);var c=b.retrieve("profiller",{form:b.serialize()});return c.form!==b.serialize()}});return a})();